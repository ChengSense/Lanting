!function(){"use strict";function e(e,t){for(;0<=t;t--){var i=c[t];if(i)for(;0<=e;e--){var o=i[e];if(o)return o}}}function t(e,t,i){e=parseInt(e),t=parseInt(t);var o=c[t]||{};c[t]=o,o[e]=i}function i(e){var t=e.id.split(":");return{x:t[1],y:t[0]}}function o(e,t){for(var i in t)e[i]=t[i];return e}var n=document.createElement("canvas"),a=n.getContext("2d"),r=120,f=30;function s(e,t){window.devicePixelRatio&&(n.style.width=k+"px",n.style.height=S+"px",n.width=E.width,n.height=E.height,a.scale(window.devicePixelRatio,window.devicePixelRatio)),function(e,t){o(a,{strokeStyle:"#d0d3d7",lineCap:"butt"}),function(e,t){var i=-1;a.beginPath();for(;++i<e.length;){var o=e[i][0];a.moveTo(o.x,o.y),a.lineTo(o.width+.5,o.y),0<i&&(a.fillStyle="#f7f7f7",a.fillRect(0,o.y,o.width,o.height),a.fillStyle="black",a.fillText(o.text,o.x+3,o.y+15))}a.stroke()}(e)}(e)}var c={},h={data:function(e,t){e=e||50,t=t||50;for(var i=-1,o=.5,n=[];++i<e;){for(var a=-1,s=.5,c=[];++a<t;)c.push(l(i,a,s,o,r,f)),s+=r;n.push(c),o+=f}return n},resetData:function(e){c={};var i=.5;return e.forEach(function(e){var o,n=.5;e.forEach(function(e){o=e,e.x=n,e.y=i,t(n,i,o),n+=e.width}),i+=o.height}),e},resetWidth:function(e,t,o){var n=i(t).x;e.forEach(function(e){var t=e[n];t.width=t.width+o})},resetHeight:function(e,t,o){e[i(t).y].forEach(function(e){e.height=e.height+o})},title:function(){var e=[""].concat(C);return C.forEach(function(t){C.forEach(function(i){e.push(""+t+i)})}),e}};function l(e,i,o,n,a,r){var f,s=h.title();return t(o,n,f=0<e&&0==i?{id:e+":"+i,x:o,y:n,width:a,height:r,text:e}:0<i&&0==e?{id:e+":"+i,x:o,y:n,width:a,height:r,text:s[i]}:0==e&&0==i?{id:e+":"+i,x:o,y:n,width:a,height:r,text:""}:{id:e+":"+i,x:o,y:n,width:a,height:r,text:e+":"+i}),f}var u=document.createElement("canvas"),d=u.getContext("2d");function g(e){window.devicePixelRatio&&(u.style.width=k+"px",u.style.height=S+"px",u.width=E.width,u.height=E.height,d.scale(window.devicePixelRatio,window.devicePixelRatio)),function(e){o(d,{font:"14px Arial"}),t=e,t.forEach(function(e){e.forEach(function(e){d.fillText(e.text,e.x+3,e.y+15)})});var t}(e)}var w=document.createElement("canvas"),x=w.getContext("2d");function v(e,t){window.devicePixelRatio&&(w.style.width=k+"px",w.style.height=S+"px",w.width=E.width,w.height=E.height,x.scale(window.devicePixelRatio,window.devicePixelRatio)),function(e,t){o(x,{strokeStyle:"#d0d3d7",lineCap:"butt"}),function(e,t){var i=-1;x.beginPath();for(;++i<t.length;){var o=t[i];x.moveTo(o.x,o.y),x.lineTo(o.x,o.height+.5),0<i&&(x.fillStyle="#f7f7f7",x.fillRect(o.x,0,o.width,o.height),x.fillStyle="black",x.fillText(o.text,o.x+3,o.y+15))}x.stroke()}(0,t)}(0,t)}var p=document.createElement("canvas"),y=p.getContext("2d");function m(e,t){window.devicePixelRatio&&(p.style.width=k+"px",p.style.height=S+"px",p.width=E.width,p.height=E.height,y.scale(window.devicePixelRatio,window.devicePixelRatio)),function(e,t){o(y,{strokeStyle:"#d0d3d7",lineCap:"butt"}),function(e,t){var i=-1,o=-1;y.beginPath();for(;++i<e.length;){var n=e[i][0];y.moveTo(n.x,n.y),y.lineTo(k+.5,n.y),0<i&&(y.fillStyle="#f7f7f7",y.fillRect(0,n.y,n.width,n.height))}for(;++o<t.length;){var n=t[o];y.moveTo(n.x,.5),y.lineTo(n.x,S+.5),0<o&&(y.fillStyle="#f7f7f7",y.fillRect(n.x,0,n.width,n.height))}y.stroke()}(e,t),v(0,t),s(e)}(e,t)}var I={line:function(e,t,i){e.moveTo(t.x,t.y),e.lineTo(i.x,i.y)},area:function(e,t){M.beginPath(),M.clearRect(0,0,k,S),M.fillStyle="#e3edf9",M.fillRect(e.x,e.y,t.x-e.x+t.width,t.y-e.y+t.height),M.rect(e.x,e.y,t.x-e.x+t.width,t.y-e.y+t.height),M.drawImage(p,0,0,k,S),M.drawImage(u,0,0,k,S),M.strokeStyle="#006dff",M.lineWidth=2,M.stroke()},render:function(e){M.beginPath(),M.clearRect(0,0,k,S),M.drawImage(p,0,0,k,S),M.drawImage(u,0,0,k,S),e&&(M.strokeStyle="#006dff",M.lineWidth=1.5,M.rect(e.x,e.y,e.width,e.height)),M.stroke()},scrollX:function(e,t){M.beginPath(),M.clearRect(0,0,k,S),M.drawImage(u,-parseInt(e.x),-parseInt(t.y),k,S),M.drawImage(p,-parseInt(e.x),-parseInt(t.y),k,S),M.globalCompositeOperation="source-over",M.drawImage(w,-parseInt(e.x),0,k,S),M.drawImage(n,0,-parseInt(t.y),k,S),M.globalCompositeOperation="destination-over",M.stroke()},scrollY:function(e,t){M.beginPath(),M.clearRect(0,0,k,S),M.drawImage(u,-parseInt(t.x),-parseInt(e.y),k,S),M.drawImage(p,-parseInt(t.x),-parseInt(e.y),k,S),M.globalCompositeOperation="source-over",M.drawImage(w,-parseInt(t.x),0,k,S),M.drawImage(n,0,-parseInt(e.y),k,S),M.globalCompositeOperation="destination-over",M.stroke()}},R={x:.5,y:.5};function b(){var t,i,o,n,a=$(".sm-sheet-scrollbar-horizontal"),r=$(document);function f(r){var f=parseInt(r.pageX-t);f<0&&(f=0),a.offset({left:f}),function(t){var a=e(t=parseInt(n*t),i);if(o==a)return;R.x=a.x,I.scrollX(a,R),o=a}(f)}function s(){r.off("mousemove",f).off("mouseup",s)}a.mousedown(function(c){if(!(o=e(c.pageX,c.pageY)))return;r.mousemove(f).mouseup(s),h=T[0],l=h[h.length-1],n=(l.x+l.width-k)/(k-a.width()),t=c.offsetX,i=c.pageY;var h,l})}function P(){var t,i,o,n,a=$(".sm-sheet-scrollbar-vertical"),r=$(document);function f(r){var f=r.pageY-i;f<0&&(f=0),a.offset({top:f}),function(i){i=parseInt(n*i);var a=e(t,i);if(o==a)return;R.y=a.y,I.scrollY(a,R),o=a}(f)}function s(){r.off("mousemove",f).off("mouseup",s)}a.mousedown(function(c){if(!(o=e(c.pageX,c.pageY)))return;r.mousemove(f).mouseup(s),h=T[T.length-1][0],n=(h.y+h.height-S)/(S-a.height()),t=c.pageX,i=c.offsetY;var h})}function X(){var t,o,n,a=$(".split-vertical"),r=$("canvas"),f=$(document);function s(o){f.mouseup(c),r.off("mousedown",s),a.show();var h=e(o.pageX,o.pageY);Math.abs(h.x+h.width-o.pageX)<8?t=(n=h).x+n.width:Math.abs(h.x-o.pageX)<8&&(n=function(e){var t=i(e);return T[t.y][t.x-1]}(h),t=n.x+n.width)}function c(e){if(n){f.off("mouseup",c);var i=parseInt(e.pageX-t);h.resetWidth(T,n,i),h.resetData(T),a.hide(),z(),n=null}}r.mousemove(function(t){if(n)return a.css({left:t.pageX,top:0});var f=e(t.pageX,t.pageY);if(f)if(Math.abs(f.x+f.width-t.pageX)<8&&0==i(f).y){if(r.css({cursor:"col-resize"}),o)return;r.mousedown(s),o=f}else if(Math.abs(f.x-t.pageX)<8&&0==i(f).y){if(r.css({cursor:"col-resize"}),o)return;r.mousedown(s),o=f}else 0<i(f).x&&(r.css({cursor:"default"}),r.off("mousedown",s),o=null)})}function Y(){var t,o,n,a=$(".split-horizontal"),r=$("canvas"),f=$(document);function s(o){r.off("mousedown",s),f.mouseup(c),a.show();var h=e(o.pageX,o.pageY);Math.abs(h.y+h.height-o.pageY)<8?t=(n=h).y+n.height:Math.abs(h.y-o.pageY)<8&&(n=function(e){var t=i(e);return T[t.y-1][t.x]}(h),t=n.y+n.height)}function c(e){if(n){f.off("mouseup",c);var i=parseInt(e.pageY-t);h.resetHeight(T,n,i),h.resetData(T),a.hide(),z(),n=null}}r.mousemove(function(t){if(n)return a.css({left:0,top:t.pageY});var f=e(t.pageX,t.pageY);if(f)if(Math.abs(f.y+f.height-t.pageY)<8&&0==i(f).x){if(r.css({cursor:"row-resize"}),o)return;r.mousedown(s),o=f}else if(Math.abs(f.y-t.pageY)<8&&0==i(f).x){if(r.css({cursor:"row-resize"}),o)return;r.mousedown(s),o=f}else 0<i(f).y&&(r.css({cursor:"default"}),r.off("mousedown",s),o=null)})}var k,S,T;$("canvas"),$("textarea");var C=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],E=document.querySelector("#canvas"),M=E.getContext("2d");function z(){g(T),m(T,T[0]),I.render()}k=$(E).parent().width(),S=$(E).parent().height(),window.devicePixelRatio&&(E.style.width=k+"px",E.style.height=S+"px",E.width=k*window.devicePixelRatio,E.height=S*window.devicePixelRatio,M.scale(window.devicePixelRatio,window.devicePixelRatio),T=h.data(),z(),b(),P(),X(),Y())}();
